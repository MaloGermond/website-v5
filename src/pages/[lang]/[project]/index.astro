---
import Project from "@layouts/Project.astro"
import { locales, defaultLocales } from '@locales/config.json';

export function getStaticPaths() {
  const projects = ["unistellar", "privowny"]

  const path = locales.flatMap((lang) =>
    projects.map((project) => ({
      params: { lang, project }, // Génère /fr/unistellar, /fr/privowny, /en/unistellar, etc.
    })))

  return path;
}
const { lang, project } = Astro.params
const description=""

const posts = await Astro.glob('./*.md')

// Parse le nom de fichier pour extraire le nom et la locale
const parsedPosts = posts.map((post) => {
  const fileName = post.file.split('/').pop(); // Ex: "article1_fr.md"
  const [name, loc] = fileName.replace('.md', '').split('_'); // ["article1", "fr"]

  return {
    ...post,
    name, // "article1"
    loc,  // "fr"
    frontmatter: post.frontmatter,
  };
});

console.log(parsedPosts)

---

<Project pageTitle={project} description = {description} lang={lang}>
  
</Project>